import{u as g,p,r as u,j as e,i as b,B as x,y as h,V as j,q as y,W as f,X as v}from"./index-D-9hKb6s.js";import{P as w}from"./PaymentBreadcrumb-arL3agYV.js";import{O as N}from"./OrderDetail-BalXV16I.js";const O="/assets/mellat-BvbFpeNO.jfif",k="/assets/parsian-CNXal1U4.jfif",C="/assets/saman-BsbVHQha.jfif",P=[{name:"bank",value:"mellat",id:"mellat",image:O},{name:"bank",value:"pasargad",id:"pasargad",image:k},{name:"bank",value:"saman",id:"saman",image:C}],z=()=>{const o=g(),{amount:n}=p(t=>t.cardReducer),[l,d]=u.useState(""),[c,i]=u.useState(!1),r=async()=>{console.log(l);const t=b.get("accessToken"),a=await fetch(`${x}/client/userCoupon/use`,{method:"POST",headers:{"Content-type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({coupon_code:l,totalPrice:n})}),s=await a.json();a.status!==201?h.error("کد نامعتبر است"):h.success("تخفیف اعمال شد ");const{coupon:m}=s;o(j(m))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-row-reverse flex-wrap items-center justify-between rounded-lg border border-zinc-300 p-4 text-right",children:[e.jsx("p",{className:"mb-2 text-right text-[20px] font-semibold",children:"ثبت کد تخفیف"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>i(!0),className:"h-full rounded-lg bg-green-800 px-6 py-2 text-nowrap text-white",children:"ثبت کد"}),e.jsx("input",{onChange:t=>d(t.target.value),className:"w-full rounded-lg border border-zinc-400 px-3 placeholder:text-right",placeholder:"کد تخفیف",type:"text"})]})]}),e.jsx("div",{className:`bg-black/80 ${c?"flex":"hidden"} fixed top-0 left-0 z-40 h-screen w-screen items-center justify-center`,children:e.jsxs("div",{className:"flex h-[20%] w-[80%] flex-wrap items-center justify-center gap-4 rounded-2xl bg-white",children:[e.jsx("p",{className:"w-full text-center",children:"در نظر داشته باشید بعد از اعمال کد تحفیف شما منقضی خواهد شد"}),e.jsx("button",{className:"h-fit cursor-pointer rounded-lg border border-zinc-400 px-6 py-2 text-nowrap text-zinc-400 hover:text-black",onClick:()=>i(!1),children:"لغو"}),e.jsxs("button",{className:"h-fit cursor-pointer rounded-lg bg-green-800 px-6 py-2 text-nowrap text-white",onClick:()=>r(),children:[" ","ثبت کد"]})]})})]})};function F(){const{products:o}=p(a=>a.cardReducer),n=g(),l=async()=>{const a=b.get("accessToken"),s=await fetch(`${x}/client/payment/request`,{method:"POST",body:JSON.stringify({amount:5e3,callBackUrl:`${x}/client/payment/verify`,description:"paytest"}),headers:{"Content-type":"application/json",Authorization:`Bearer ${a}`}}),m=await s.json();s.status===200&&(window.location=m.url)},{pathname:d}=y(),{paymentOption:c,payLink:i}=p(a=>a.orderInfo),r=a=>c===a,t=a=>i===a;return e.jsxs("div",{children:[e.jsx(w,{pathName:d}),e.jsxs("main",{className:"mx-auto my-6 flex max-w-[1224px] flex-col gap-3 rounded-md text-[#353535] md:h-[554px] md:flex-row-reverse",children:[e.jsxs("div",{className:"flex w-full flex-col space-y-3 rounded-xl text-[#353535] sm:h-full",children:[e.jsx(z,{}),e.jsxs("div",{className:"flex flex-row-reverse items-center justify-between rounded-md border border-zinc-400 p-4 max-md:flex-wrap",children:[e.jsx("p",{className:"mb-2 border-zinc-300 py-2 text-right max-md:w-full max-md:border-b",children:"روش پرداخت"}),e.jsx("div",{className:"mb-2 flex justify-end gap-2 text-right max-sm:w-full",children:e.jsxs("div",{className:r("inPlace")?"rounded-xl border border-green-300 bg-green-100 p-2":"p-2",children:[e.jsx("label",{className:"relative font-semibold",htmlFor:"inPlace",children:"پرداخت در محل"}),e.jsx("input",{className:"opacity-0",onChange:a=>n(f(a.target.value)),name:"payOption",value:"inPlace",type:"radio",id:"inPlace"}),e.jsx("p",{className:"max-sm:hidden",children:"توسط پیک رستوران ارسال شود"})]})}),e.jsx("div",{className:"flex justify-end gap-2 text-right max-sm:w-full",children:e.jsxs("div",{className:r("payOnline")?"rounded-xl border border-green-300 bg-green-100 p-2":"p-2",children:[e.jsx("label",{className:"font-semibold",htmlFor:"payOnline",children:"پرداخت اینترنتی"}),e.jsx("input",{className:"opacity-0",onChange:a=>n(f(a.target.value)),name:"payOption",type:"radio",value:"payOnline",id:"payOnline"}),e.jsx("p",{className:"max-sm:hidden",children:"توسط پیک رستوران ارسال شود"})]})})]}),r("payOnline")?e.jsxs("div",{className:"flex min-h-[185px] flex-row-reverse items-center justify-between rounded-md border border-zinc-400 p-4 max-md:flex-wrap",children:[e.jsx("p",{className:"mb-2 border-zinc-300 py-2 text-right max-md:w-full max-md:border-b",children:"درگاه پرداخت"}),e.jsx("div",{className:"flex w-full justify-center gap-2 text-right",children:P.map(a=>e.jsxs("label",{className:t(a.value)?"relative overflow-hidden rounded-md border-2 border-green-700 p-2":"relative overflow-hidden rounded-md border p-2",htmlFor:a.value,children:[e.jsx("img",{src:a.image,className:"size-[90px] object-cover",alt:a.name}),e.jsx("input",{onChange:s=>n(v(s.target.value)),className:"absolute top-0 left-0 opacity-0",type:"radio",value:a.value,name:a.name,id:a.value})]},a.id))})]}):e.jsxs("div",{className:"flex flex-row-reverse items-center justify-between rounded-md border border-zinc-400 p-4 max-md:flex-wrap",children:[e.jsx("p",{className:"mb-1 ml-2 text-xl text-nowrap",children:"! قابل توجه "}),e.jsx("p",{className:"text-center text-[16px]",children:"هزینه سفارش شما در حین تحویل کالا دریافت خواهد شد. لطفا قبل از تحویل کالا کارت بانکی یا پول نقد همراه خود داشته باشید و از درخواست برای پرداخت در زمان بعدی یا نسیه خودداری فرمایید. با تشکر از همراهی شما."})]})]}),e.jsx(N,{children:e.jsx("button",{disabled:o.length==0,onClick:()=>l(),className:"mt-2 w-full rounded-lg bg-green-900 p-2 text-center text-white disabled:bg-zinc-300",children:"انتقال به صفحه پرداخت"})})]})]})}export{F as default};
