import{a as l,j as e}from"./index-CdV-T1hA.js";import{G as N}from"./iconBase-D_6F5K19.js";import{u as h}from"./useQuery-DR7smcWk.js";import{S as F}from"./SliderNext-BuWy1E76.js";import{d as C,e as g,f as S}from"./index-BceAg49x.js";import"./utils-km2FGkQ4.js";import"./index-BuTT9NER.js";function E(s){return N({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(s)}const k=async()=>{const s=await fetch("http://localhost:3000/api/v1/admin/category?page=1");if(!s.ok)throw new Error("خطا در دریافت داده‌ها");return(await s.json()).categories},q=async s=>{const n=await fetch(`http://localhost:3000/api/v1/admin/subCategories/category/${s}?page=1`);if(!n.ok)throw new Error("خطا در دریافت ساب‌کاتگوری‌ها");const a=await n.json();return console.log("subs",a),a.subCategories},A=async s=>{const n=await fetch(`http://localhost:3000/api/v1/admin/products/subcategory/${s}?page=1`);if(!n.ok)throw new Error("خطا در دریافت محصولات");return(await n.json()).products},_=()=>{const[s,n]=l.useState(5),[a,u]=l.useState(""),{data:d,isLoading:j,error:w}=h({queryKey:["main category"],queryFn:k}),{data:o,refetch:f}=h({queryKey:["subcategory",s],queryFn:()=>q(s),enabled:!!s}),{data:i,isLoading:b,refetch:p}=h({queryKey:["products",a],queryFn:()=>A(a),enabled:!!a});if(l.useEffect(()=>{o&&o.length>0&&!a&&u(o[0].id.toString())},[o]),l.useEffect(()=>{s&&f()},[s,f]),l.useEffect(()=>{a&&p()},[a,p]),j||b)return e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-t-4 border-b-4 border-[#417F56]"})});if(w)return e.jsx("p",{children:"خطا در دریافت داده‌ها"});const x=d==null?void 0:d.slice(0,4),v=t=>{const c=i==null?void 0:i.map(r=>r.id===t?{...r,isFavorite:!r.isFavorite}:r);console.log(c)},y=(t,c)=>{const r=i==null?void 0:i.map(m=>m.id===t?{...m,rating:c}:m);console.log(r)};return e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsxs("div",{className:"container mx-auto px-5",children:[e.jsx("div",{className:"mt-5 flex flex-wrap items-center justify-end gap-4 rounded-2xl bg-[#F8F8F8] p-7 shadow-md sm:flex-row sm:gap-8",children:x==null?void 0:x.map(t=>e.jsx("div",{className:`cursor-pointer text-lg font-medium text-[#5A5A5A] transition-all duration-300 ease-in-out hover:scale-110 hover:font-bold hover:text-[#417F56] ${t.id===s?"scale-110 border-b-2 border-[#417F56] font-bold text-[#417F56]":""}`,onClick:()=>n(t.id),children:e.jsx("h3",{children:t.title})},t.id))}),e.jsxs("div",{className:"mx-auto mt-6 flex w-full max-w-3xl flex-col items-center gap-4 sm:flex-row sm:gap-6",children:[e.jsx("form",{className:"flex-1",children:e.jsx("input",{className:"h-12 w-full rounded-full bg-[#ECECEC] px-5 text-black transition-all duration-300 outline-none focus:bg-white focus:ring-2 focus:ring-[#417F56]",type:"text",placeholder:"جستجو..."})}),e.jsxs("div",{className:"relative w-full sm:w-52",children:[e.jsx("select",{value:a||"",onChange:t=>u(t.target.value),className:"h-12 w-full cursor-pointer appearance-none rounded-full bg-[#417F56] px-6 pr-10 text-white shadow-md transition-all duration-300 outline-none hover:bg-[#355E44] hover:shadow-lg focus:ring-2 focus:ring-[#2E5E3A] sm:w-50",children:o==null?void 0:o.map(t=>e.jsx("option",{value:t.id,children:t.title},t.id))}),e.jsx(E,{className:"absolute top-1/2 right-5 -translate-y-1/2 text-xl text-white transition-transform duration-300 ease-in-out"})]})]}),e.jsx("div",{className:"mt-10 flex items-center justify-between",children:e.jsxs("button",{className:"flex h-10 w-44 cursor-pointer items-center justify-center gap-3 rounded-2xl border border-[#417F56] bg-white p-2 text-[#417F56] shadow-md transition-all duration-300 ease-in-out hover:scale-105 hover:bg-[#417F56] hover:text-white",children:[e.jsx("p",{className:"text-base font-medium",children:"تکمیل خرید"}),e.jsx(C,{className:"h-6 w-6"})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-2xl font-semibold",children:"محصولات"}),e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2",children:i==null?void 0:i.map(t=>e.jsx("div",{className:"flex items-center justify-between rounded-lg bg-white p-4 shadow-md transition-all duration-300 hover:scale-105",style:{minWidth:"600px",minHeight:"158px"},children:e.jsxs("div",{className:"flex h-[158px] w-[600px] items-center justify-between",children:[e.jsxs("div",{className:"flex w-2/3 flex-col justify-between",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"cursor-pointer transition-transform duration-300 hover:scale-125",onClick:()=>v(t.id),children:t.isFavorite?e.jsx(g,{className:"h-[24px] w-[24px] text-red-500 transition-all duration-300"}):e.jsx(g,{className:"h-[24px] w-[24px] text-gray-500 transition-all duration-300"})}),e.jsx("h4",{className:"text-[20px] font-semibold",children:t.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-[18px] text-[#353535]",children:[e.jsxs("span",{children:[t.price," "]}),e.jsx("span",{children:"تومان"})]}),e.jsx("p",{className:"text-[14px] text-[#353535]",children:t.description})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-center gap-1",children:[e.jsx("button",{className:"flex h-[40px] w-[244px] items-center justify-center rounded-md bg-[#417F56] font-semibold text-white",children:"افزودن به سبد خرید"}),[...Array(5)].map((c,r)=>e.jsx(S,{className:`h-[24px] w-[24px] cursor-pointer transition-all duration-300 ${r<t.rating?"text-yellow-400":"text-gray-300"}`,onClick:()=>y(t.id,r+1)},r))]})]}),e.jsx("img",{src:`http://localhost:3000/${t.image_url}`,alt:"",className:"h-[158px] w-[169px] rounded-md object-cover transition-transform duration-300 hover:scale-105"})]})},t.id))})]})]})]})};export{_ as default};
